<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Song Player</title>
    
    <link rel="stylesheet" href="css/header.css">
    <script src="js/header.js"></script>
</head>
<body>
     <div class="sharethis-sticky-share-buttons"></div>
<div id="header">
    <img width="50px" src="images/alomoy.png" alt="আলোময় সঙ্গীত লোগো">
    <h1>আলোময় সঙ্গীত</h1>
    <button id="hamburgerMenu" class="hamburger">☰</button>
    <nav id="navLinks">
        <a href="index.html">Home</a>
        <a href="albums.html">সব অ্যালবাম</a>
        <a href="search.html">সঙ্গীত সার্চ</a>
        <a href="#about">আগের ভার্সন</a>
    </nav>
</div>
    <div id="song-info">
        <h1 id="song-title"></h1>
        <p id="song-album"></p>
        <p id="song-singer"></p>
        <p id="song-group"></p>
        <audio id="song-player" controls></audio>
    </div>

    এ অ্যালবামের সব গান শুনুন

    <script>
// Utility to parse CSV into an array of objects
function parseCSV(text) {
    const lines = text.split('\n');
    const headers = lines[0].split(',');
    return lines.slice(1).map(line => {
        const values = line.split(',');
        return headers.reduce((obj, header, index) => {
            obj[header.trim()] = values[index]?.trim();
            return obj;
        }, {});
    });
}

// Function to fetch CSV and find song details
function loadSongData() {
    // Get the song name from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const songName = urlParams.get('song_name');

    if (!songName) {
        document.body.innerHTML = '<h1>Song name not provided in the URL.</h1>';
        return;
    }

    // Fetch the CSV file
    fetch('radio/songs.csv')
        .then(response => response.text())
        .then(csvText => {
            const songs = parseCSV(csvText);
            const song = songs.find(s => s.Song.toLowerCase() === songName.toLowerCase());

            if (!song) {
                document.body.innerHTML = `<h1>"${songName}" সঙ্গীতটি পাওয়া যায়নি। সার্চ করুন...</h1>`;
                return;
            }

            // Populate the HTML with song details
            document.getElementById('song-title').textContent = song.Song;
            document.getElementById('song-album').textContent = `অ্যালবাম: ${song.album}`;
            document.getElementById('song-group').textContent = `শিল্পীগোষ্ঠী: ${song.group}`;
            document.getElementById('song-singer').textContent = `শিল্পী: ${song.singer}`;
            document.getElementById('song-player').src = song.src;
        })
        .catch(err => {
            console.error('Error fetching or parsing CSV:', err);
            document.body.innerHTML = '<h1>Error loading song data.</h1>';
        });
}

// Load the song data when the page is loaded
loadSongData();


    </script>
</body>
</html>

